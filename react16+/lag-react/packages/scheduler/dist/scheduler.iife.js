var scheduler=function(l,T){"use strict";function C(e){let t;switch(e){case 1:t=-1;break;case 2:t=250;break;case 5:t=1073741823;break;case 4:t=1e4;break;case 3:default:t=5e3;break}return t}function U(e,t){const i=e.length;e.push(t),W(e,t,i)}function u(e){return e.length===0?null:e[0]}function O(e){if(e.length===0)return null;const t=e[0],i=e.pop();return i!==t&&(e[0]=i,A(e,i,0)),t}function W(e,t,i){let r=i;for(;r>0;){const n=r-1>>>1,m=e[n];if(y(m,t)>0)e[n]=t,e[r]=m,r=n;else return}}function A(e,t,i){let r=i;const n=e.length,m=n>>>1;for(;r<m;){const s=(r+1)*2-1,a=e[s],c=s+1,k=e[c];if(y(a,t)<0)c<n&&y(k,a)<0?(e[r]=k,e[c]=t,r=c):(e[r]=a,e[s]=t,r=s);else if(c<n&&y(k,t)<0)e[r]=k,e[c]=t,r=c;else return}}function y(e,t){const i=e.sortIndex-t.sortIndex;return i!==0?i:e.id-t.id}const I=[],f=[];let R=1,o=null,_=3,P=!1,d=!1,L=!1,b,M=!1,E=null,S=-1,H=5;function N(){clearTimeout(R),R=-1}function h(e,t){R=setTimeout(()=>{e(T.getCurrentTime())},t)}function g(e){let t=u(f);for(;t!==null;){if(t.callback===null)O(f);else if(t.startTime<=e)O(f),t.sortIndex=t.expirationTime,U(I,t);else return;t=u(f)}}function Y(e){if(P=!1,g(e),!d)if(u(I)!==null)d=!0,w(v);else{const t=u(f);t!==null&&h(Y,t.startTime-e)}}function w(e){E=e,M||(M=!0,b())}const j=()=>{if(E!==null){const e=T.getCurrentTime();S=e;const t=!0;let i=!0;try{i=E(t,e)}finally{i?b():(M=!1,E=null)}}else M=!1},B=new MessageChannel,G=B.port2;B.port1.onmessage=j,b=()=>{G.postMessage(null)};function v(e,t){d=!1,P&&(P=!1,N()),L=!0;let i=_;try{return K(e,t)}finally{o=null,_=i,L=!1}}function K(e,t){let i=t;for(g(i),o=u(I);o!==null;){const r=q();if(o.expirationTime>i&&(!e||r))break;const n=o.callback;if(_=o.priorityLevel,T.isFn(n)){o.callback=null;const m=o.expirationTime<=i,s=n(m);if(i=T.getCurrentTime(),T.isFn(s))return o.callback=s,g(i),!0;o===u(I)&&O(I),g(i)}else O(I);o=u(I)}if(o!==null)return!0;{const r=u(f);return r!==null&&h(Y,r.startTime-i),!1}}function q(){return!(T.getCurrentTime()-S<H)}function F(e,t,i){const r=T.getCurrentTime();let n;if(T.isObject(i)&&i!==null){let c=i==null?void 0:i.delay;typeof c=="number"&&c>0?n=r+c:n=r}else n=r;const m=C(e),s=n+m,a={id:R++,callback:t,priorityLevel:e,startTime:n,expirationTime:s,sortIndex:-1};n>r?(a.sortIndex=n,U(f,a),u(I)===null&&a===u(f)&&(P?N():P=!0,h(Y,n-r))):(a.sortIndex=s,U(I,a),!d&&!L&&(d=!0,w(v)))}function Q(e){e.callback=null}function D(){return _}function z(){}const J=Object.freeze(Object.defineProperty({__proto__:null,scheduleCallback:F,cancelCallback:Q,getCurrentPriorityLevel:D,requestPaint:z},Symbol.toStringTag,{value:"Module"}));return l.IDLE_PRIORITY_TIMEOUT=1073741823,l.IMMEDIATE_PRIORITY_TIMEOUT=-1,l.IdlePriority=5,l.IdleSchedulerPriority=5,l.ImmediatePriority=1,l.ImmediateSchedulerPriority=1,l.LOW_PRIORITY_TIMEOUT=1e4,l.LowPriority=4,l.LowSchedulerPriority=4,l.NORMAL_PRIORITY_TIMEOUT=5e3,l.NoPriority=0,l.NormalPriority=3,l.NormalSchedulerPriority=3,l.Scheduler=J,l.USER_BLOCKING_PRIORITY_TIMEOUT=250,l.UserBlockingPriority=2,l.UserBlockingSchedulerPriority=2,l.getCurrentSchedulerPriorityLevel=D,l.getTimeoutByPriorityLevel=C,Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),l}({},utils);
//# sourceMappingURL=scheduler.iife.js.map
